import { defineCollection, z } from 'astro:content';

const productosCollection = defineCollection({
    schema: z.object({
        title: z.string(),
        price: z.number(),
        subcategory: z.string(), // Changed from category to subcategory
        stockStatus: z.enum(['En Stock', '칔ltimas Unidades', 'Agotado']).default('En Stock'),
        image: z.string(),
        // Aceptamos las 3 auxiliares como texto (ruta de la imagen) y opcionales
        gallery1: z.string().optional(),
        gallery2: z.string().optional(),
        gallery3: z.string().optional(),
        
        sizes: z.array(z.string()).optional(),
        // 游녢 A칌ADIDO: Tallas personalizadas a mano (texto libre)
        customSizes: z.string().optional(),

        colors: z.array(z.string()).optional(),
        // 游녢 A칌ADIDO: Colores personalizados a mano (texto libre)
        customColors: z.string().optional(),

        description: z.string(),

        // 游녢 NUEVOS CAMPOS SEO (Opcionales)
        seoTitle: z.string().optional(),
        seoDescription: z.string().optional(),

        draft: z.boolean().default(false),
    }),
});

const categoriasCollection = defineCollection({
    schema: z.object({
        title: z.string(), // Nombre para Men칰s
        pageTitle: z.string(), // T칤tulo de la P치gina de Categor칤a
        description: z.string(), // Descripci칩n de la Categor칤a
        order: z.number().default(1), // Orden de aparici칩n
        seoTitle: z.string().optional(), // SEO: Meta T칤tulo
        seoDescription: z.string().optional(), // SEO: Meta Descripci칩n
    }),
});

const subcategoriasCollection = defineCollection({
    schema: z.object({
        title: z.string(), // Nombre para Men칰s
        pageTitle: z.string(), // T칤tulo de la P치gina de Subcategor칤a
        description: z.string(), // Descripci칩n de la Subcategor칤a
        order: z.number().default(1), // Orden de aparici칩n
        seoTitle: z.string().optional(), // SEO: Meta T칤tulo
        seoDescription: z.string().optional(), // SEO: Meta Descripci칩n
        parentCategory: z.string(), // Categor칤a Principal (relaci칩n por t칤tulo)
    }),
});

export const collections = {
    'productos': productosCollection,
    'categorias': categoriasCollection,
    'subcategorias': subcategoriasCollection,
};